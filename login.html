<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Swapyard Login</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen">

<div class="container max-w-md p-6 bg-white text-black rounded-2xl shadow-lg">
  <h2 class="text-2xl font-bold mb-4 text-center">Swapyard Login</h2>
  <form id="loginForm">
    <div class="mb-3">
      <label class="form-label">Email or Phone</label>
      <input type="text" id="emailOrPhone" class="form-control" placeholder="Enter email or phone" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" id="password" class="form-control" placeholder="Enter password" required>
    </div>
    <button type="submit" class="btn btn-dark w-100"><i class="bi bi-box-arrow-in-right"></i> Login</button>
  </form>
  <p class="mt-3 text-center">Don't have an account? <a href="signup.html" class="text-blue-600">Signup</a></p>
</div>

<script>
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const emailOrPhone = document.getElementById('emailOrPhone').value;
  const password = document.getElementById('password').value;

  try {
    const res = await fetch('http://localhost:3000/api/auth/login', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ emailOrPhone, password })
    });
    const data = await res.json();
    if(res.ok){
      sessionStorage.setItem('user', JSON.stringify(data.user));
      window.location.href = 'index.html';
    } else {
      alert(data.message);
    }
  } catch(err){
    console.error(err);
    alert('Server error');
  }
});
</script>
</body>
</html>
