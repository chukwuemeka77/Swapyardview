<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Swapyard Signup</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen">

<div class="container max-w-md p-6 bg-white text-black rounded-2xl shadow-lg">
  <h2 class="text-2xl font-bold mb-4 text-center">Swapyard Signup</h2>
  <form id="signupForm">
    <div class="mb-3">
      <label class="form-label">Full Name</label>
      <input type="text" id="name" class="form-control" placeholder="Enter your full name" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Phone</label>
      <input type="text" id="phone" class="form-control" placeholder="Enter your phone number" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" id="password" class="form-control" placeholder="Enter password" required>
    </div>
    <button type="submit" class="btn btn-dark w-100"><i class="bi bi-person-plus-fill"></i> Signup</button>
  </form>
  <p class="mt-3 text-center">Already have an account? <a href="login.html" class="text-blue-600">Login</a></p>
</div>

<script>
document.getElementById('signupForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const phone = document.getElementById('phone').value;
  const password = document.getElementById('password').value;

  try {
    const res = await fetch('http://localhost:3000/api/auth/signup', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ name,email,phone,password })
    });
    const data = await res.json();
    if(res.ok){
      sessionStorage.setItem('user', JSON.stringify(data.user));
      window.location.href = 'index.html';
    } else {
      alert(data.message);
    }
  } catch(err){
    console.error(err);
    alert('Server error');
  }
});
</script>
</body>
</html>
